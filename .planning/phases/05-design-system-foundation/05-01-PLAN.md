---
phase: 05-design-system-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components.json
  - tailwind.config.ts
  - postcss.config.js
  - src/app/globals.css
  - src/app/layout.tsx
  - src/lib/utils.ts
  - src/components/ui/button.tsx
  - src/components/ui/input.tsx
  - src/components/ui/card.tsx
  - src/components/ui/badge.tsx
  - src/components/ui/separator.tsx
autonomous: true

must_haves:
  truths:
    - "shadcn/ui Button, Input, Card, Badge, and Separator components render correctly with Radix accessibility primitives"
    - "A distinctive non-generic Google Font is loaded and visible on all text (no Inter, Arial, or system sans-serif)"
    - "A warm, cohesive color palette is defined via CSS variables — teal primary, warm grays, amber accents"
    - "The cn() utility from shadcn/ui merges Tailwind classes across all components"
  artifacts:
    - path: "components.json"
      provides: "shadcn/ui configuration pointing to custom theme"
    - path: "src/lib/utils.ts"
      provides: "cn() class merge utility"
      exports: ["cn"]
    - path: "src/app/globals.css"
      provides: "Full CSS variable theme (colors, radii, fonts)"
      contains: "--primary"
    - path: "src/app/layout.tsx"
      provides: "Custom Google Font loaded via next/font"
    - path: "tailwind.config.ts"
      provides: "Tailwind config extended with shadcn/ui CSS variable references"
    - path: "src/components/ui/button.tsx"
      provides: "shadcn/ui Button with custom variants"
    - path: "src/components/ui/input.tsx"
      provides: "shadcn/ui Input with accessible focus ring"
    - path: "src/components/ui/card.tsx"
      provides: "shadcn/ui Card for content sections"
    - path: "src/components/ui/badge.tsx"
      provides: "shadcn/ui Badge for status indicators"
    - path: "src/components/ui/separator.tsx"
      provides: "shadcn/ui Separator for visual dividers"
  key_links:
    - from: "tailwind.config.ts"
      to: "src/app/globals.css"
      via: "CSS variable references in Tailwind color config"
      pattern: "hsl\\(var\\(--"
    - from: "src/components/ui/*.tsx"
      to: "src/lib/utils.ts"
      via: "cn() import for class merging"
      pattern: "import.*cn.*from.*utils"
    - from: "src/app/layout.tsx"
      to: "next/font/google"
      via: "Google Font import and className application"
      pattern: "from.*next/font/google"
---

<objective>
Install and configure shadcn/ui with a custom theme that gives the IDD Benefits Navigator a warm, distinctive, empowering visual identity.

Purpose: Establish the component and theming foundation that all subsequent phases (6-9) will build on. Every page redesign needs these shared components, CSS variables, and typography in place first.

Output: Working shadcn/ui installation with 5 core components, a custom Google Font (not Inter/Arial), warm color palette via CSS variables, and the cn() utility for class merging.
</objective>

<execution_context>
@/Users/vincecain/.claude/get-shit-done/workflows/execute-plan.md
@/Users/vincecain/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@tailwind.config.ts
@src/app/globals.css
@src/app/layout.tsx
@postcss.config.js
@tsconfig.json
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install shadcn/ui, create custom theme, and configure typography</name>
  <files>
    package.json
    components.json
    tailwind.config.ts
    postcss.config.js
    src/app/globals.css
    src/app/layout.tsx
    src/lib/utils.ts
    tsconfig.json
  </files>
  <action>
**Step 1 — Install dependencies:**

```bash
npm install tailwindcss-animate class-variance-authority clsx tailwind-merge
```

These are the 4 peer deps shadcn/ui needs. Do NOT run `npx shadcn@latest init` — we will configure manually for full control.

**Step 2 — Create `src/lib/utils.ts`:**

```ts
import { type ClassValue, clsx } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
```

**Step 3 — Create `components.json`** in project root:

```json
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.ts",
    "css": "src/app/globals.css",
    "baseColor": "neutral",
    "cssVariables": true,
    "prefix": ""
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "iconLibrary": "lucide"
}
```

**Step 4 — Install Lucide icons:**

```bash
npm install lucide-react
```

**Step 5 — Choose and load a distinctive Google Font:**

Use **Nunito** as the primary font and **Nunito Sans** as the body font. Nunito is rounded, friendly, and warm — perfect for families in crisis. It is NOT generic (not Inter, not Arial, not system sans-serif).

In `src/app/layout.tsx`, replace the Inter import:

```tsx
import { Nunito, Nunito_Sans } from "next/font/google";

const nunito = Nunito({
  subsets: ["latin"],
  variable: "--font-heading",
  display: "swap",
  weight: ["400", "600", "700", "800"],
});

const nunitoSans = Nunito_Sans({
  subsets: ["latin"],
  variable: "--font-body",
  display: "swap",
  weight: ["400", "500", "600", "700"],
});
```

Apply both font variables to the `<body>` tag:
```tsx
<body className={`${nunito.variable} ${nunitoSans.variable} font-body antialiased`}>
```

Remove the old `inter` import and its className usage entirely.

**Step 6 — Rewrite `src/app/globals.css`** with the full shadcn/ui CSS variable theme:

Keep `@tailwind base/components/utilities` directives. In `@layer base`, define `:root` with these CSS variables:

Color palette — warm teal + warm gray + amber accent:
- `--background: 48 33% 97%` (warm off-white, close to current #FAFAF7)
- `--foreground: 60 7% 9%` (warm near-black, close to current #171717)
- `--card: 48 33% 97%` / `--card-foreground: 60 7% 9%`
- `--popover: 0 0% 100%` / `--popover-foreground: 60 7% 9%`
- `--primary: 168 52% 37%` (teal — close to existing blue-600 #1f7268)
- `--primary-foreground: 0 0% 100%` (white text on primary)
- `--secondary: 48 20% 93%` (warm light gray)
- `--secondary-foreground: 60 7% 20%`
- `--muted: 48 14% 91%` / `--muted-foreground: 48 5% 40%`
- `--accent: 38 92% 50%` (amber — warm, encouraging accent)
- `--accent-foreground: 38 92% 15%`
- `--destructive: 0 84% 60%` / `--destructive-foreground: 0 0% 100%`
- `--border: 48 12% 85%`
- `--input: 48 12% 85%`
- `--ring: 168 52% 37%` (matches primary for focus rings)
- `--radius: 0.625rem` (slightly rounded — friendly but not bubbly)
- `--chart-1` through `--chart-5` for future data viz (teal shades)
- `--sidebar-*` variables for potential sidebar components

Typography variables:
- `--font-heading: var(--font-heading)` (Nunito — set by next/font)
- `--font-body: var(--font-body)` (Nunito Sans — set by next/font)

Keep the existing:
- `scroll-behavior: smooth` on html
- `prefers-reduced-motion` media query
- `*:focus-visible` styles (update ring color to `hsl(var(--ring))`)

Also add in `@layer base`:
```css
* {
  @apply border-border;
}
body {
  @apply bg-background text-foreground font-body;
}
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-heading);
}
```

**Step 7 — Update `tailwind.config.ts`:**

Extend the config to support shadcn/ui CSS variable pattern:

```ts
import type { Config } from "tailwindcss";
import tailwindAnimate from "tailwindcss-animate";

const config: Config = {
  darkMode: ["class"],
  content: [
    "./src/pages/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/components/**/*.{js,ts,jsx,tsx,mdx}",
    "./src/app/**/*.{js,ts,jsx,tsx,mdx}",
  ],
  theme: {
    extend: {
      colors: {
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        card: { DEFAULT: "hsl(var(--card))", foreground: "hsl(var(--card-foreground))" },
        popover: { DEFAULT: "hsl(var(--popover))", foreground: "hsl(var(--popover-foreground))" },
        primary: { DEFAULT: "hsl(var(--primary))", foreground: "hsl(var(--primary-foreground))" },
        secondary: { DEFAULT: "hsl(var(--secondary))", foreground: "hsl(var(--secondary-foreground))" },
        muted: { DEFAULT: "hsl(var(--muted))", foreground: "hsl(var(--muted-foreground))" },
        accent: { DEFAULT: "hsl(var(--accent))", foreground: "hsl(var(--accent-foreground))" },
        destructive: { DEFAULT: "hsl(var(--destructive))", foreground: "hsl(var(--destructive-foreground))" },
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
      fontFamily: {
        heading: ["var(--font-heading)", "system-ui", "sans-serif"],
        body: ["var(--font-body)", "system-ui", "sans-serif"],
      },
    },
  },
  plugins: [tailwindAnimate],
};
export default config;
```

IMPORTANT: The old `blue` and `gray` color objects are being replaced by the CSS variable system. Existing components reference `blue-600`, `blue-700`, `gray-300`, etc. Those will break and be fixed in later phases (6-9) when each page is redesigned. This is expected — Phase 5 is the foundation, phases 6-9 fix individual pages.

However, to prevent a broken intermediate state, KEEP the old blue/gray scales alongside the new variables temporarily. Add them under the new colors so both work:

```ts
// Legacy colors — remove after Phase 9 completes
blue: {
  50: '#f0f9f6', 100: '#d5f0ea', 200: '#a8ddd0', 300: '#73c5b3',
  400: '#43a896', 500: '#2d8f7f', 600: '#1f7268', 700: '#1a5d55',
  800: '#174a44', 900: '#143d38', 950: '#0a201e',
},
gray: {
  50: '#F9F9F6', 100: '#F3F3EF', 200: '#E5E5E0', 300: '#D4D4CE',
  400: '#A3A39C', 500: '#73736D', 600: '#52524D', 700: '#3D3D38',
  800: '#272723', 900: '#1A1A17', 950: '#0F0F0D',
},
```

**Step 8 — Verify the `tsconfig.json` paths alias:**

Confirm `@/*` maps to `./src/*`. It already does — no changes needed. Just verify.
  </action>
  <verify>
1. Run `npm run build` — no TypeScript or build errors
2. Verify `src/lib/utils.ts` exports `cn` function
3. Verify `components.json` exists in project root
4. Verify `src/app/layout.tsx` imports Nunito and Nunito_Sans (not Inter)
5. Verify `src/app/globals.css` contains `--primary` and `--ring` CSS variables
6. Verify `tailwind.config.ts` references `hsl(var(--primary))` pattern
7. Run `npm run dev` and confirm the app loads without errors (check terminal output, do not open browser)
  </verify>
  <done>
shadcn/ui foundation is configured: dependencies installed, cn() utility created, components.json exists, Nunito/Nunito Sans fonts loaded via next/font, warm teal/amber CSS variable theme defined, Tailwind config extended with shadcn/ui color pattern. Build passes without errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add core shadcn/ui components (Button, Input, Card, Badge, Separator)</name>
  <files>
    src/components/ui/button.tsx
    src/components/ui/input.tsx
    src/components/ui/card.tsx
    src/components/ui/badge.tsx
    src/components/ui/separator.tsx
  </files>
  <action>
**Install 5 shadcn/ui components** using the CLI (components.json must exist from Task 1):

```bash
npx shadcn@latest add button input card badge separator --yes
```

This creates files in `src/components/ui/` using the new-york style. Each component imports `cn` from `@/lib/utils` and uses the CSS variable color tokens defined in Task 1.

After installation, verify each component file exists and customize as needed:

**Button** (`src/components/ui/button.tsx`):
- Confirm it has variants: default, destructive, outline, secondary, ghost, link
- Confirm it has sizes: default, sm, lg, icon
- The default variant should use `bg-primary text-primary-foreground` (our teal)
- Add a `warm` variant for encouraging CTAs: `bg-accent text-accent-foreground hover:bg-accent/90`
- Ensure min-height of 44px on all sizes for touch accessibility (WCAG 2.5.8)

**Input** (`src/components/ui/input.tsx`):
- Confirm it uses `border-input` and `ring-ring` CSS variables
- Ensure focus ring uses `focus-visible:ring-ring` (our teal focus ring)
- Ensure min-height of 44px for touch accessibility

**Card** (`src/components/ui/card.tsx`):
- Confirm Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter are exported
- Confirm it uses `bg-card text-card-foreground border` CSS variables
- The card should feel warm — the bg-card (warm off-white) and rounded corners (--radius) handle this automatically

**Badge** (`src/components/ui/badge.tsx`):
- Confirm variants: default, secondary, destructive, outline
- Add `success` variant: `border-transparent bg-emerald-100 text-emerald-800 hover:bg-emerald-200` — used for eligibility confidence indicators
- Add `warm` variant: `border-transparent bg-amber-100 text-amber-800 hover:bg-amber-200` — used for encouraging labels

**Separator** (`src/components/ui/separator.tsx`):
- Confirm it uses `bg-border` CSS variable
- No customizations needed

After adding all components, verify imports work:

Create a temporary test — in any existing page, add `import { Button } from "@/components/ui/button"` and confirm no import errors during build. Then remove the test import.
  </action>
  <verify>
1. Verify all 5 files exist: `ls src/components/ui/button.tsx src/components/ui/input.tsx src/components/ui/card.tsx src/components/ui/badge.tsx src/components/ui/separator.tsx`
2. Run `npm run build` — no errors
3. Verify Button has `warm` variant (grep for "warm" in button.tsx)
4. Verify Badge has `success` and `warm` variants
5. Verify all components import `cn` from `@/lib/utils`
6. Verify Card exports all subcomponents (CardHeader, CardTitle, CardContent, etc.)
  </verify>
  <done>
5 shadcn/ui components (Button, Input, Card, Badge, Separator) are installed with Radix accessibility primitives. Custom variants added: Button has `warm` for CTAs, Badge has `success` and `warm` for eligibility indicators. All components use the CSS variable theme and cn() utility. Build passes.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` passes with zero errors
2. `src/lib/utils.ts` exports cn() function
3. `components.json` exists and points to correct paths
4. `src/app/layout.tsx` loads Nunito and Nunito Sans (NOT Inter)
5. `src/app/globals.css` defines full CSS variable theme with --primary, --accent, --ring
6. `tailwind.config.ts` uses hsl(var(--*)) pattern for all semantic colors
7. 5 component files exist in `src/components/ui/`
8. All UI components import cn from @/lib/utils
9. Legacy blue/gray color scales still work (no breakage of existing pages)
</verification>

<success_criteria>
- shadcn/ui components render with Radix accessibility primitives (FOUN-01)
- Custom Nunito/Nunito Sans fonts load globally — no Inter or Arial visible (FOUN-02 partial)
- Warm teal + amber CSS variable theme applied — not generic (FOUN-02 partial)
- Build passes, existing pages still render (no regressions)
- Foundation ready for Plan 05-02 (animations, responsive tokens)
</success_criteria>

<output>
After completion, create `.planning/phases/05-design-system-foundation/05-01-SUMMARY.md`
</output>
